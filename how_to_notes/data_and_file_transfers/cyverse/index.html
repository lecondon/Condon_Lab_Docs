<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://lecondon.github.io/Condon_Lab_Docs/how_to_notes/data_and_file_transfers/cyverse/">
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>General Cyverse Information - Condon Research Group Docs</title>
        <link href="../../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../../..">Condon Research Group Docs</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../.." class="nav-link">Condon Research Group Docs</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Admin <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../admin/pcard_reimbursement/" class="dropdown-item">Pcard reimbursement</a>
</li>
                                    
<li>
    <a href="../../../admin/travel_reimbursement/" class="dropdown-item">Information Regarding Reimbursement for Travel</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Example scripts <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../example_scripts/" class="dropdown-item">Example scripts</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">How to notes <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">HPC systems</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../HPC_systems/UA_HPC/" class="dropdown-item">UA HPC Information</a>
</li>
            
<li>
    <a href="../../HPC_systems/cheyenne/" class="dropdown-item">Running on Cheyenne (NCAR)</a>
</li>
            
<li>
    <a href="../../HPC_systems/cori/" class="dropdown-item">Cori</a>
</li>
            
<li>
    <a href="../../HPC_systems/parflow_install/" class="dropdown-item">ParFlow Install</a>
</li>
            
<li>
    <a href="../../HPC_systems/verde/" class="dropdown-item">Verde</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Data and file transfers</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../apple_remote_desktop_ssh/" class="dropdown-item">Remote Desktop / SSH / Basic Command line</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">General Cyverse Information</a>
</li>
            
<li>
    <a href="../globus/" class="dropdown-item">Globus File Transfer</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Tutorials and tranining materials <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../tutorials_and_tranining_materials/" class="dropdown-item">Index</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Useful external resources <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../../useful_external_resources/great_python_packages/" class="dropdown-item">Great python packages</a>
</li>
                                    
<li>
    <a href="../../../useful_external_resources/parflow_resources/" class="dropdown-item">Parflow resources</a>
</li>
                                    
<li>
    <a href="../../../useful_external_resources/research_repos/" class="dropdown-item">Research repos</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../apple_remote_desktop_ssh/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../globus/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#general-cyverse-information" class="nav-link">General Cyverse Information</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#description-running-notes-with-links-and-tips-for-doing-file-transfers-with-cyverse-feel-free-to-update-and-add-to-this-document-as-needed" class="nav-link">Description:  Running notes with links and tips for doing file transfers with Cyverse.  Feel free to update and add to this document as needed.</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#creating-and-account-and-getting-access" class="nav-link">Creating and Account and Getting Access:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#setting-up-irods-so-you-can-do-command-line-transfers" class="nav-link">Setting up irods so you can do command line transfers:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="general-cyverse-information">General Cyverse Information</h1>
<p><strong><em>Laura Condon, Jan 2019</em></strong></p>
<h2 id="description-running-notes-with-links-and-tips-for-doing-file-transfers-with-cyverse-feel-free-to-update-and-add-to-this-document-as-needed"><strong>Description:  </strong>Running notes with links and tips for doing file transfers with Cyverse.  Feel free to update and add to this document as needed.</h2>
<hr />
<h2 id="creating-and-account-and-getting-access">Creating and Account and Getting Access:</h2>
<p>In order to upload data, you need to create a Cyverse account and be given permissions by Laura. Provide the username of your account and the e-mail you used to create the account (your UA e-mail) to Laura. </p>
<p><strong>Logging in:</strong></p>
<p><a href="http://de.cyverse.org/">De.cyverse.org</a></p>
<p><strong>Our Server:</strong></p>
<ul>
<li>You can find under Community Data/avra </li>
<li>From command line: /iplant/home/shared/avra</li>
</ul>
<p><strong>GUI file transferring with cyberduck</strong></p>
<p><a href="https://cyberduck-quickstart.readthedocs.io/en/latest/#">https://cyberduck-quickstart.readthedocs.io/en/latest/#</a></p>
<h2 id="setting-up-irods-so-you-can-do-command-line-transfers">Setting up irods so you can do command line transfers:</h2>
<ol>
<li>Sign up for a cyverse account: <a href="https://user.cyverse.org/register">https://user.cyverse.org/register</a></li>
<li>Install icommands so you can use irods<ul>
<li>Instructions for setting up on Mac: <a href="https://wiki.cyverse.org/wiki/display/DS/Setting+Up+iCommands#SettingUpiCommands-mac">https://wiki.cyverse.org/wiki/display/DS/Setting+Up+iCommands#SettingUpiCommands-mac</a></li>
<li>For setting up on Powell I used the page above and followed the link for the cent6</li>
<li>To check OS: cat /etc/*release</li>
<li>Needed root access to install the irods commands so I logged in as root and then did:</li>
<li>sudo yum install<a href="https://files.renci.org/pub/irods/releases/4.1.10/centos6/irods-icommands-4.1.10-centos6-x86_64.rpm"> https://files.renci.org/pub/irods/releases/4.1.10/centos6/irods-icommands-4.1.10-centos6-x86_64.rpm</a></li>
<li>Then login as your username and setup the cyverse connection according to step 3</li>
</ul>
</li>
<li>Initialize irods by typing iinit and then putting in your user information following part two of the link on step 2</li>
</ol>
<p><strong>Command line transfers with irods: </strong></p>
<p>First initialize irods like this:</p>
<pre><code>* _iinit_
* [data.cyverse.org](http://data.cyverse.org/)
* Port: 1247
* User: yourusername
* Zone: iplant
* Then enter your cyverse password
</code></pre>
<p>To upload: </p>
<ul>
<li>cd to the local directory with the data you want to transfer</li>
<li>Then ‘icd’ to the location on Cyverse where you want to put the data<ul>
<li>icd /iplant/home/shared/avra  #for avra</li>
<li>icd /iplant/home/username #for your Cyverse home directory (note this is small and not where you should be storing things)</li>
</ul>
</li>
<li>iput -vP “filename"</li>
<li>To batch upload: iput -K -P -b -r -T folder-where-you-want-files-on-cyverse/<ul>
<li>If you icd to where you want to put your files on cyverse then you simply need to put a period after the iput command’<ol>
<li>iput -K -P -b -r -T .</li>
</ol>
</li>
<li>-K “This causes iCommands to verify that transferred files weren't corrupted during the transfer by comparing the Checksums computed before and after the transfer.”</li>
<li>-P provides progress feedback</li>
<li>-b allows for bulk uploads</li>
<li>-r includes a folder or directory</li>
<li>-T renews socket connection every 10 min</li>
</ul>
</li>
<li>If its a tar file you can extract it on Cyverse like this:<ul>
<li>ibun -x filename.tar new</li>
<li><a href="https://wiki.cyverse.org/wiki/display/DS/Dealing+with+Tar+and+other+Archive+Files">https://wiki.cyverse.org/wiki/display/DS/Dealing+with+Tar+and+other+Archive+Files</a></li>
<li><strong>** You need to keep it to less than 2GB and several hundred files per Tar or the unzip ibun will fail. </strong></li>
</ul>
</li>
</ul>
<p>To Download:</p>
<ul>
<li>Basically the same thing but with iget instead of iput </li>
</ul>
<p><strong>Links with irods info:</strong></p>
<p>icommands help: <a href="https://wiki.cyverse.org/wiki/display/DS/Using+iCommands">https://wiki.cyverse.org/wiki/display/DS/Using+iCommands</a></p>
<p><strong>Setting up irods commands for R:</strong></p>
<ul>
<li>You should be able to run i commands in R using the system function. e.g. system(‘ils')</li>
<li>If you get a warning saying command not found even though you have them installed you probably need to modify your R path so it can find them.  To check this echo $PATH on command line and compare with system(‘echo $PATH) within R (You can also check this with Sys.getevn() to see everything or Sys.getenv("PATH”) to just see the path in R)</li>
<li>To fix you can set a new path appending the icommands to your current path like this: Sys.setenv(PATH='/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/Applications/icommands')</li>
<li>Then you also need to add the plugin: Sys.setenv(IRODS_PLUGINS_HOME="/Applications/icommands/plugins/")</li>
<li>Then check the path and check that it worked using getenv and testing an icommand. </li>
<li>NOTE: If you get an irods host error at this point its probably because you haven’t run iiint </li>
<li>PERMANENT Fix:  If you don’t want to have to add the Sys.setenv to every script then do the following:<ul>
<li>vi ~/.Rprofile   (just make the file if you don’t have one)</li>
<li>Add the following lines:<ul>
<li>Sys.setenv(PATH='/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/Applications/icommands')</li>
<li>Sys.setenv(IRODS_PLUGINS_HOME="/Applications/icommands/plugins/")</li>
</ul>
</li>
<li>Note this will permanently set your environment variables</li>
</ul>
</li>
</ul>
<p><strong>Running an Analysis on Atmospheres</strong></p>
<p><strong>Steps to run on the Cyverse Rstudio App</strong></p>
<ul>
<li>Login: <a href="http://de.cyverse.org/">de.cyverse.org</a> </li>
<li>Click on Apps - Search for ‘Rstudio’</li>
<li>Select ‘rocker-geospatial-3.5.0’ # you can also add it to your favorites</li>
<li>Give your analysis a name - you don’t have to change anything though if you don’t want</li>
<li>Click ‘Launch Analysis’</li>
<li>Then if you click on ‘Analyses’ on the left you should see the job you just launched it will say ‘running’ but its probably still initializing. </li>
<li>Click on the arrow next to its name to open the tab and you will see it launching your application.  </li>
<li>You will need to login to Cyverse and then R studio the first time it launches.For Rstudio the username and password are both rstudio </li>
<li>Once you are in Rstudio - click on the terminal window<ol>
<li>iinit<ul>
<li><a href="http://data.cyverse.org/">data.cyverse.org</a></li>
<li>Port: 1247</li>
<li>User: lecondon</li>
<li>Zone: iplant</li>
</ul>
</li>
<li>Checkout the GitHub repo<ul>
<li>git clone <a href="https://github.com/lecondon/CONUS1_Warming.git">https://github.com/lecondon/CONUS1_Warming.git \
</a></li>
</ul>
</li>
</ol>
</li>
<li>Once you have done this you will see ‘CONUS1_Warming’ in your files tab</li>
<li>Go to R scripts and click on the Rmd file you can run from here </li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
